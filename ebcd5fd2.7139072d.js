(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{195:function(e,t,i){"use strict";i.r(t),i.d(t,"frontMatter",(function(){return o})),i.d(t,"metadata",(function(){return s})),i.d(t,"rightToc",(function(){return c})),i.d(t,"default",(function(){return p}));var n=i(2),a=i(6),r=(i(0),i(218)),o={title:"Partitions",sidebar_label:"Partitions",description:"Overview of QuestDB's partition system for time-series. This is an important feature that will help you craft more efficient queries."},s={unversionedId:"concept/partitions",id:"concept/partitions",isDocsHomePage:!1,title:"Partitions",description:"Overview of QuestDB's partition system for time-series. This is an important feature that will help you craft more efficient queries.",source:"@site/docs/concept/partitions.md",slug:"/concept/partitions",permalink:"/docs/concept/partitions",version:"current",sidebar_label:"Partitions",sidebar:"docs",previous:{title:"SQL extensions",permalink:"/docs/concept/sql-extensions"},next:{title:"Symbol",permalink:"/docs/concept/symbol"}},c=[{value:"Properties",id:"properties",children:[]},{value:"Requirements",id:"requirements",children:[]},{value:"Advantages",id:"advantages",children:[]},{value:"Storage example",id:"storage-example",children:[]}],l={rightToc:c};function p(e){var t=e.components,i=Object(a.a)(e,["components"]);return Object(r.b)("wrapper",Object(n.a)({},l,i,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"QuestDB offers the option to partition tables by intervals of time. Data for\neach interval is stored in separate sets of files."),Object(r.b)("img",{alt:"Diagram of data column files and how they are partitioned to form a table",className:"screenshot--shadow screenshot--docs",src:"/img/docs/concepts/partitionModel.svg"}),Object(r.b)("h2",{id:"properties"},"Properties"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Available partition intervals are ",Object(r.b)("inlineCode",{parentName:"li"},"NONE"),", ",Object(r.b)("inlineCode",{parentName:"li"},"DAY"),", ",Object(r.b)("inlineCode",{parentName:"li"},"MONTH")," and ",Object(r.b)("inlineCode",{parentName:"li"},"YEAR"),"."),Object(r.b)("li",{parentName:"ul"},"Default behaviour is ",Object(r.b)("inlineCode",{parentName:"li"},"PARTITION BY NONE"),"."),Object(r.b)("li",{parentName:"ul"},"Partitions are defined at table creation. For more information, refer to\n",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/reference/sql/create-table/"}),"CREATE TABLE section"),".")),Object(r.b)("h2",{id:"requirements"},"Requirements"),Object(r.b)("p",null,"Partition is only available on tables with a ",Object(r.b)("inlineCode",{parentName:"p"},"designated timestamp"),". The main\nbenefit of using a designated timestamp is that the field in question will\nenforce an increasing policy on timestamp value. This allows you to leverage\nspecific high-performance time series functions. For more information on\n",Object(r.b)("inlineCode",{parentName:"p"},"designated timestamp"),", refer to the\n",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/concept/designated-timestamp/"}),"designated timestamp section"),"."),Object(r.b)("h2",{id:"advantages"},"Advantages"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Reduced disk IO for timestamp interval searches. This is because our SQL\noptimiser leverages partitioning."),Object(r.b)("li",{parentName:"ul"},"Significantly improved calculations and seek times. This is achieved by\nleveraging the chronology and relative immutability of data for previous\npartitions."),Object(r.b)("li",{parentName:"ul"},"Physical separation of data files. This makes it easily to implement file\nretention policies or extract certain intervals.")),Object(r.b)("h2",{id:"storage-example"},"Storage example"),Object(r.b)("p",null,"Each partition effectively is a directory on the host machine corresponding to\nthe partitioning interval. In the example below, we assume a table ",Object(r.b)("inlineCode",{parentName:"p"},"trips")," that\nhas been partitioned using ",Object(r.b)("inlineCode",{parentName:"p"},"PARTITION BY MONTH"),"."),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{}),"[quest-user trips]$ dir\n2017-03     2017-10     2018-05     2019-02\n2017-04     2017-11     2018-06     2019-03\n2017-05     2017-12     2018-07     2019-04\n2017-06     2018-01     2018-08     2019-05\n2017-07     2018-02     2018-09     2019-06\n2017-08     2018-03     2018-10\n2017-09     2018-04     2018-11\n")),Object(r.b)("p",null,"Each partition on the disk contains the column data files of the corresponding\ntimestamp interval."),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{}),"[quest-user 2019-06]$ dir\n_archive    cab_type.v              dropoff_latitude.d     ehail_fee.d\ncab_type.d  congestion_surcharge.d  dropoff_location_id.d  extra.d\ncab_type.k  dropoff_datetime.d      dropoff_longitude.d    fare_amount.d\n")))}p.isMDXComponent=!0}}]);