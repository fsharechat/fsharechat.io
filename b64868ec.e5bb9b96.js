(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{168:function(e,I,t){"use strict";t.r(I),t.d(I,"frontMatter",(function(){return c})),t.d(I,"metadata",(function(){return C})),t.d(I,"rightToc",(function(){return n})),t.d(I,"default",(function(){return A}));var g=t(2),a=t(6),i=(t(0),t(218)),c={title:"BACKUP keyword",sidebar_label:"BACKUP",description:"BACKUP SQL keyword reference documentation."},C={unversionedId:"reference/sql/backup",id:"reference/sql/backup",isDocsHomePage:!1,title:"BACKUP keyword",description:"BACKUP SQL keyword reference documentation.",source:"@site/docs/reference/sql/backup.md",slug:"/reference/sql/backup",permalink:"/docs/reference/sql/backup",version:"current",sidebar_label:"BACKUP",sidebar:"docs",previous:{title:"ALTER TABLE DROP PARTITION keywords",permalink:"/docs/reference/sql/alter-table-drop-partition"},next:{title:"CASE keyword",permalink:"/docs/reference/sql/case"}},n=[{value:"Syntax",id:"syntax",children:[]},{value:"Description",id:"description",children:[]},{value:"Backup directory",id:"backup-directory",children:[]},{value:"Examples",id:"examples",children:[]}],b={rightToc:n};function A(e){var I=e.components,c=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(g.a)({},b,c,{components:I,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"syntax"},"Syntax"),Object(i.b)("p",null,Object(i.b)("img",{alt:"Flow chart showing the syntax of the BACKUP keyword",src:t(346).default})),Object(i.b)("h2",{id:"description"},"Description"),Object(i.b)("p",null,"Creates a backup for one, several, or all database tables."),Object(i.b)("h2",{id:"backup-directory"},"Backup directory"),Object(i.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(i.b)("div",Object(g.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(g.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(g.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(i.b)("path",Object(g.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(i.b)("div",Object(g.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},Object(i.b)("inlineCode",{parentName:"p"},"BACKUP TABLE")," requires a ",Object(i.b)("inlineCode",{parentName:"p"},"backup directory")," which is set using the\n",Object(i.b)("a",Object(g.a)({parentName:"p"},{href:"/docs/reference/configuration/server/"}),"configuration key"),"\n",Object(i.b)("inlineCode",{parentName:"p"},"cairo.sql.backup.root")," in the\n",Object(i.b)("a",Object(g.a)({parentName:"p"},{href:"/docs/reference/configuration/root-directory-structure/#serverconf"}),"server.conf"),"\nfile."))),Object(i.b)("pre",null,Object(i.b)("code",Object(g.a)({parentName:"pre"},{className:"language-shell",metastring:'title="Example configuration key"',title:'"Example',configuration:!0,'key"':!0}),"cairo.sql.backup.root=/Users/UserName/Desktop\n")),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"backup directory")," can be on a local disk to the server, on a remote disk,\nor a remote filesystem. QuestDB will enforce that the backup are only written in\na location relative to the ",Object(i.b)("inlineCode",{parentName:"p"},"backup directory"),". This is a security feature to\ndisallow random file access by QuestDB."),Object(i.b)("p",null,"The tables will be written in a directory with today's date. By default, the\nformat is ",Object(i.b)("inlineCode",{parentName:"p"},"yyyy-MM-dd"),", for example ",Object(i.b)("inlineCode",{parentName:"p"},"2020-04-20"),"."),Object(i.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(i.b)("div",Object(g.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(g.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(g.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(i.b)("path",Object(g.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(i.b)("div",Object(g.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"You can define a custom format using the ",Object(i.b)("inlineCode",{parentName:"p"},"cairo.sql.backup.dir.datetime.format"),"\n",Object(i.b)("a",Object(g.a)({parentName:"p"},{href:"/docs/reference/configuration/server/"}),"configuration key")," like the example\nbelow"))),Object(i.b)("pre",null,Object(i.b)("code",Object(g.a)({parentName:"pre"},{className:"language-shell",metastring:'title="Example user-defined directory format"',title:'"Example',"user-defined":!0,directory:!0,'format"':!0}),"cairo.sql.backup.dir.datetime.format=yyyy-dd-MM\n")),Object(i.b)("p",null,"The data and meta files will be written following the\n",Object(i.b)("a",Object(g.a)({parentName:"p"},{href:"/docs/reference/configuration/root-directory-structure/#db"}),"db directory structure")),Object(i.b)("pre",null,Object(i.b)("code",Object(g.a)({parentName:"pre"},{className:"language-filestructure",metastring:'title="Directory structure (single backup)"',title:'"Directory',structure:!0,"(single":!0,'backup)"':!0}),"'backup directory/'\n2020-04-20\n\u251c\u2500\u2500 table1\n\u251c\u2500\u2500 table2\n\u2514\u2500\u2500 ...\n")),Object(i.b)("p",null,"If a user performs several backups on the same date, each backup will be written\na new directory. Subsequent backups on the same date will look as follows:"),Object(i.b)("pre",null,Object(i.b)("code",Object(g.a)({parentName:"pre"},{className:"language-filestructure",metastring:'title="Directory structure (multiple backups)"',title:'"Directory',structure:!0,"(multiple":!0,'backups)"':!0}),"'backup directory/'\n\u251c\u2500\u2500 2020-04-20      'first'\n\u251c\u2500\u2500 2020-04-20.1    'second'\n\u251c\u2500\u2500 2020-04-20.2    'third'\n\u251c\u2500\u2500 2020-04-21      'first new date'\n\u251c\u2500\u2500 2020-04-21.1    'first new date'\n\u2514\u2500\u2500 ...\n")),Object(i.b)("h2",{id:"examples"},"Examples"),Object(i.b)("pre",null,Object(i.b)("code",Object(g.a)({parentName:"pre"},{className:"language-questdb-sql",metastring:'title="Single table"',title:'"Single','table"':!0}),"BACKUP TABLE table1;\n")),Object(i.b)("pre",null,Object(i.b)("code",Object(g.a)({parentName:"pre"},{className:"language-questdb-sql",metastring:'title="Multiple tables"',title:'"Multiple','tables"':!0}),"BACKUP TABLE table1, table2, table3;\n")),Object(i.b)("pre",null,Object(i.b)("code",Object(g.a)({parentName:"pre"},{className:"language-questdb-sql",metastring:'title="All tables"',title:'"All','tables"':!0}),"BACKUP DATABASE;\n")))}A.isMDXComponent=!0},346:function(e,I,t){"use strict";t.r(I),I.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NDciIGhlaWdodD0iMTI1Ij4KICAgIDxkZWZzPgogICAgICAgIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+CiAgICAgICAgICAgIEBuYW1lc3BhY2UgImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIjsKICAgICAgICAgICAgICAgIC5saW5lICAgICAgICAgICAgICAgICB7ZmlsbDogbm9uZTsgc3Ryb2tlOiAjNjM2MjczO30KICAgICAgICAgICAgICAgIC5ib2xkLWxpbmUgICAgICAgICAgICB7c3Ryb2tlOiAjNjM2MjczOyBzaGFwZS1yZW5kZXJpbmc6IGNyaXNwRWRnZXM7IHN0cm9rZS13aWR0aDogMjsgfQogICAgICAgICAgICAgICAgLnRoaW4tbGluZSAgICAgICAgICAgIHtzdHJva2U6ICM2MzYyNzM7IHNoYXBlLXJlbmRlcmluZzogY3Jpc3BFZGdlc30KICAgICAgICAgICAgICAgIC5maWxsZWQgICAgICAgICAgICAgICB7ZmlsbDogIzYzNjI3Mzsgc3Ryb2tlOiBub25lO30KICAgICAgICAgICAgICAgIHRleHQudGVybWluYWwgICAgICAgICB7Zm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgIlNlZ29lIFVJIiwgUm9ib3RvLCBVYnVudHUsIENhbnRhcmVsbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOwogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICAgICAgZmlsbDogI2ZmZmZmZjsKICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGV4dC5ub250ZXJtaW5hbCAgICAgIHtmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAiU2Vnb2UgVUkiLCBSb2JvdG8sIFVidW50dSwgQ2FudGFyZWxsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICAgICAgICAgICBmaWxsOiAjZTI4OWE0OwogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRleHQucmVnZXhwICAgICAgICAgICB7Zm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgIlNlZ29lIFVJIiwgUm9ib3RvLCBVYnVudHUsIENhbnRhcmVsbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOwogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICAgICAgZmlsbDogIzAwMTQxRjsKICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZWN0LCBjaXJjbGUsIHBvbHlnb24ge2ZpbGw6IG5vbmU7IHN0cm9rZTogbm9uZTt9CiAgICAgICAgICAgICAgICByZWN0LnRlcm1pbmFsICAgICAgICAge2ZpbGw6IG5vbmU7IHN0cm9rZTogI2JlMmY1Yjt9CiAgICAgICAgICAgICAgICByZWN0Lm5vbnRlcm1pbmFsICAgICAge2ZpbGw6IHJnYmEoMjU1LDI1NSwyNTUsMC4xKTsgc3Ryb2tlOiBub25lO30KICAgICAgICAgICAgICAgIHJlY3QudGV4dCAgICAgICAgICAgICB7ZmlsbDogbm9uZTsgc3Ryb2tlOiBub25lO30KICAgICAgICAgICAgICAgIHBvbHlnb24ucmVnZXhwICAgICAgICB7ZmlsbDogI0M3RUNGRjsgc3Ryb2tlOiAjMDM4Y2JjO30KICAgICAgICA8L3N0eWxlPgogICAgPC9kZWZzPgogICAgPHBvbHlnb24gcG9pbnRzPSI5IDYxIDEgNTcgMSA2NSIvPgogICAgPHBvbHlnb24gcG9pbnRzPSIxNyA2MSA5IDU3IDkgNjUiLz4KICAgIDxyZWN0IHg9IjMxIiB5PSI0NyIgd2lkdGg9Ijc0IiBoZWlnaHQ9IjMyIiByeD0iMTAiLz4KICAgIDxyZWN0IHg9IjI5IiB5PSI0NSIgd2lkdGg9Ijc0IiBoZWlnaHQ9IjMyIiBjbGFzcz0idGVybWluYWwiIHJ4PSIxMCIvPgogICAgPHRleHQgY2xhc3M9InRlcm1pbmFsIiB4PSIzOSIgeT0iNjUiPkJBQ0tVUDwvdGV4dD4KICAgIDxyZWN0IHg9IjE0NSIgeT0iNDciIHdpZHRoPSI2MiIgaGVpZ2h0PSIzMiIgcng9IjEwIi8+CiAgICA8cmVjdCB4PSIxNDMiIHk9IjQ1IiB3aWR0aD0iNjIiIGhlaWdodD0iMzIiIGNsYXNzPSJ0ZXJtaW5hbCIgcng9IjEwIi8+CiAgICA8dGV4dCBjbGFzcz0idGVybWluYWwiIHg9IjE1MyIgeT0iNjUiPlRBQkxFPC90ZXh0PjxhIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bGluazpocmVmPSIjdGFibGVOYW1lIiB4bGluazp0aXRsZT0idGFibGVOYW1lIj4KICAgIDxyZWN0IHg9IjI0NyIgeT0iNDciIHdpZHRoPSI4OCIgaGVpZ2h0PSIzMiIvPgogICAgPHJlY3QgeD0iMjQ1IiB5PSI0NSIgd2lkdGg9Ijg4IiBoZWlnaHQ9IjMyIiBjbGFzcz0ibm9udGVybWluYWwiLz4KICAgIDx0ZXh0IGNsYXNzPSJub250ZXJtaW5hbCIgeD0iMjU1IiB5PSI2NSI+dGFibGVOYW1lPC90ZXh0PjwvYT48cmVjdCB4PSIyNDciIHk9IjMiIHdpZHRoPSIyNCIgaGVpZ2h0PSIzMiIgcng9IjEwIi8+CiAgICA8cmVjdCB4PSIyNDUiIHk9IjEiIHdpZHRoPSIyNCIgaGVpZ2h0PSIzMiIgY2xhc3M9InRlcm1pbmFsIiByeD0iMTAiLz4KICAgIDx0ZXh0IGNsYXNzPSJ0ZXJtaW5hbCIgeD0iMjU1IiB5PSIyMSI+LDwvdGV4dD4KICAgIDxyZWN0IHg9IjE0NSIgeT0iOTEiIHdpZHRoPSI5MiIgaGVpZ2h0PSIzMiIgcng9IjEwIi8+CiAgICA8cmVjdCB4PSIxNDMiIHk9Ijg5IiB3aWR0aD0iOTIiIGhlaWdodD0iMzIiIGNsYXNzPSJ0ZXJtaW5hbCIgcng9IjEwIi8+CiAgICA8dGV4dCBjbGFzcz0idGVybWluYWwiIHg9IjE1MyIgeT0iMTA5Ij5EQVRBQkFTRTwvdGV4dD4KICAgIDxyZWN0IHg9IjM5NSIgeT0iNDciIHdpZHRoPSIyNCIgaGVpZ2h0PSIzMiIgcng9IjEwIi8+CiAgICA8cmVjdCB4PSIzOTMiIHk9IjQ1IiB3aWR0aD0iMjQiIGhlaWdodD0iMzIiIGNsYXNzPSJ0ZXJtaW5hbCIgcng9IjEwIi8+CiAgICA8dGV4dCBjbGFzcz0idGVybWluYWwiIHg9IjQwMyIgeT0iNjUiPjs8L3RleHQ+CiAgICA8cGF0aCB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0ibGluZSIgZD0ibTE3IDYxIGgyIG0wIDAgaDEwIG03NCAwIGgxMCBtMjAgMCBoMTAgbTYyIDAgaDEwIG0yMCAwIGgxMCBtODggMCBoMTAgbS0xMjggMCBsMjAgMCBtLTEgMCBxLTkgMCAtOSAtMTAgbDAgLTI0IHEwIC0xMCAxMCAtMTAgbTEwOCA0NCBsMjAgMCBtLTIwIDAgcTEwIDAgMTAgLTEwIGwwIC0yNCBxMCAtMTAgLTEwIC0xMCBtLTEwOCAwIGgxMCBtMjQgMCBoMTAgbTAgMCBoNjQgbS0yMzAgNDQgaDIwIG0yMzAgMCBoMjAgbS0yNzAgMCBxMTAgMCAxMCAxMCBtMjUwIDAgcTAgLTEwIDEwIC0xMCBtLTI2MCAxMCB2MjQgbTI1MCAwIHYtMjQgbS0yNTAgMjQgcTAgMTAgMTAgMTAgbTIzMCAwIHExMCAwIDEwIC0xMCBtLTI0MCAxMCBoMTAgbTkyIDAgaDEwIG0wIDAgaDExOCBtMjAgLTQ0IGgxMCBtMjQgMCBoMTAgbTMgMCBoLTMiLz4KICAgIDxwb2x5Z29uIHBvaW50cz0iNDM3IDYxIDQ0NSA1NyA0NDUgNjUiLz4KICAgIDxwb2x5Z29uIHBvaW50cz0iNDM3IDYxIDQyOSA1NyA0MjkgNjUiLz48L3N2Zz4K"}}]);