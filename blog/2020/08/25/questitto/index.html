<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=3">
<meta httpequiv="x-ua-compatible" content="ie=edge">
<meta property="og:type" content="website">
<meta name="author" content="fsharechat">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@questdb">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<link href="https://www.googletagmanager.com" rel="dns-prefetch">
<link href="https://www.google-analytics.com" rel="dns-prefetch">
<link rel="shortcut icon" href="https://https://fsharechat.github.io//img/favicon.png">
<link rel="apple-touch-icon" sizes="48x48" href="/img/icons/icon-48x48.png">
<link rel="apple-touch-icon" sizes="72x72" href="/img/icons/icon-72x72.png">
<link rel="apple-touch-icon" sizes="96x96" href="/img/icons/icon-96x96.png">
<link rel="apple-touch-icon" sizes="144x144" href="/img/icons/icon-144x144.png">
<link rel="apple-touch-icon" sizes="192x192" href="/img/icons/icon-192x192.png">
<link rel="apple-touch-icon" sizes="256x256" href="/img/icons/icon-256x256.png">
<link rel="apple-touch-icon" sizes="384x384" href="/img/icons/icon-384x384.png">
<link rel="apple-touch-icon" sizes="512x512" href="/img/icons/icon-512x512.png">
<link rel="sitemap" type="application/xml" href="/sitemap.xml">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Time series data, faster Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Time series data, faster Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PVR7M2G"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-PVR7M2G",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Time series data, faster" href="/opensearch.xml">
<link rel="icon" href="/img/favicon.png">
<link rel="manifest" href="/manifest.webmanifest">
<meta name="theme-color" content="#d14671">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#21222c">
<link rel="apple-touch-icon" href="/img/favicon.png">
<link rel="mask-icon" href="/img/favicon.png" content="#fff">
<meta name="msapplication-TileImage" content="/img/favicon.png">
<meta name="msapplication-TileColor" content="#21222c"><title data-react-helmet="true">Light-weight, blazing fast stack for your IoT application | Time series data, faster</title><meta data-react-helmet="true" name="description" content="Create a simple IoT stack with Mosquitto MQTT Broker, Telegraf and QuestDB."><meta data-react-helmet="true" property="og:image" content="https://https://fsharechat.github.io//img/og.png"><meta data-react-helmet="true" property="og:url" content="https://https://fsharechat.github.io/"><meta data-react-helmet="true" property="og:title" content="Light-weight, blazing fast stack for your IoT application | Time series data, faster"><meta data-react-helmet="true" property="og:description" content="Create a simple IoT stack with Mosquitto MQTT Broker, Telegraf and QuestDB."><meta data-react-helmet="true" name="twitter:image" content="https://https://fsharechat.github.io//img/og.png"><meta data-react-helmet="true" name="twitter:description" content="Create a simple IoT stack with Mosquitto MQTT Broker, Telegraf and QuestDB."><meta data-react-helmet="true" name="twitter:title" content="Light-weight, blazing fast stack for your IoT application | Time series data, faster"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for &quot;Light-weight, blazing fast stack for your IoT application | Time series data, faster&quot;"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link rel="stylesheet" href="/styles.2a8a7e1b.css">
</head>
<body itemscope itemtype="http://schema.org/Organization">
<meta itemprop="name" content="Fast SQL open source database for time series - QuestDB">
<meta itemprop="description" content="QuestDB is an open source database designed to make time-series lightning fast and easy. It exposes a high performance REST API and supports Postgres wire.">
<meta itemprop="url" content="https://https://fsharechat.github.io/">
<meta itemprop="logo" content="https://https://fsharechat.github.io//img/favicon.png">
<meta itemprop="sameAs" content="https://twitter.com/questdb">
<meta itemprop="sameAs" content="https://www.linkedin.com/company/questdb/">
<meta itemprop="sameAs" content="https://www.crunchbase.com/organization/quest-db">
<meta itemprop="sameAs" content="https://github.com/questdb">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner inner_3txf"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand brand_9Wyn" href="/"><img alt="QuestDB" class="navbar__logo" src="/img/navbar/fshare.svg"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Install</a><ul class="dropdown__menu"><li><a class="dropdown__link" position="left" href="/docs/guide/docker/">Docker</a></li><li><a class="dropdown__link" position="left" href="/docs/guide/homebrew/">Homebrew</a></li><li><a class="dropdown__link" position="left" href="/docs/guide/binaries/">From the binaries</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/introduction/">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/questdb/questdb" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__item--github">GitHub</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">⌘</span><span class="DocSearch-Button-Key">K</span></button><a class="getStarted_1xnS button_Ni2_ button--primary_316O button--uppercase_35Ce button--xsmall_3jz_" href="/getstarted/">Get Started</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand brand_9Wyn" href="/"><img alt="QuestDB" class="navbar__logo" src="/img/navbar/fshare.svg"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist">Install</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" position="left" href="/docs/guide/docker/">Docker</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/docs/guide/homebrew/">Homebrew</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/docs/guide/binaries/">From the binaries</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/introduction/">Documentation</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog/">Blog</a></li><li class="menu__list-item"><a href="https://github.com/questdb/questdb" target="_blank" rel="noopener noreferrer" class="menu__link navbar__item--github">GitHub</a></li></ul></div></div></div></nav><div class="wrapper_1hNx"><div class="container margin-vert--lg"><div class="row"><div class="col col--8 col--offset-2"><article><header><h1 class="margin-bottom--sm blogPostTitle_1mse">Light-weight, blazing fast stack for your IoT application</h1><div class="margin-vert--md"><time datetime="2020-08-25T00:00:00.000Z" class="blogPostDate_3bQP">August 25, 2020  · 7 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/shantanoo-desai" target="_blank" rel="noreferrer noopener"><img src="https://avatars.githubusercontent.com/shantanoo-desai" alt="Shan Desai"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/shantanoo-desai" target="_blank" rel="noreferrer noopener">Shan Desai</a></h4><small class="avatar__subtitle">QuestDB Contributor</small></div></div></header><section class="markdown"><p>Note: I wanted you to know that this post is written by one of our contributors,
Shan Desai. Shan is a research scientist working for the Bremen Institute for
Production and Logistics (<a href="http://www.biba.uni-bremen.de/" target="_blank" rel="noopener noreferrer">BIBA</a>). His work
involves the use of IoT devices in order to improve product tracking and
transparency in a B2B marketplace. You can find more details on
<a href="https://shantanoo-desai.github.io/" target="_blank" rel="noopener noreferrer">Shan&#x27;s personnal website</a>.</p><p>Thanks a lot for your contribution Shan!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="overview"></a>Overview<a aria-hidden="true" tabindex="-1" class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><blockquote><p>QuestDB is the fastest open-source Time-Series Database out there in terms of
performance.</p></blockquote><p>The developers were kind enough to welcome me into their community and I wanted
to make things easier for people trying things out with QuestDB.</p><p>Lo! and behold <a href="https://github.com/shantanoo-desai/questitto" target="_blank" rel="noopener noreferrer">Questitto</a> an <em>out-of-the-box</em> repository for your initial
IoT Applications. The repository is an altered version for my repository
<a href="https://github.com/shantanoo-desai/tiguitto" target="_blank" rel="noopener noreferrer">tiguitto</a> which helps users deploy the highly used <strong>TIG+Mosquitto
(Telegraf, InfluxDB, Grafana) + Mosquitto MQTT Broker</strong> stack in no time.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="motivation"></a>Motivation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#motivation" title="Direct link to heading">#</a></h2><p>I am really looking forward to use some <code>SQL</code> queries with Time-Series Databases
and <code>QuestDB</code> provides such functionalities as well as some cool new features of
<a href="/docs/reference/function/timestamp/">Dynamic Timestamping</a>.</p><p>Not to mention, my staple
<a href="https://docs.influxdata.com/influxdb/v1.8/write_protocols/line_protocol_tutorial/" target="_blank" rel="noopener noreferrer">InfluxDB&#x27;s line Protocol</a>
is supported via sockets too!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="stack"></a>Stack<a aria-hidden="true" tabindex="-1" class="hash-link" href="#stack" title="Direct link to heading">#</a></h2><p><code>questitto</code> currently comes with basic user authentication support for Mosquitto
MQTT broker. The Broker allows only specific users to publish / subscribe data
hence reducing misuse. Telegraf writes the incoming data via subscribing to the
MQTT Broker and pushes the data to QuestDB.</p><p>In order to make it easy to deploy, the stack is deployable via <code>docker</code> and
configuration is made simple via usage of text files (MQTT broker&#x27;s users) and
an Environment File (for Telegraf)</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="setup"></a>Setup<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setup" title="Direct link to heading">#</a></h3><p>Clone the repository:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#8be9fd">git</span><span class="token plain"> clone https://github.com/shantanoo-desai/questitto.git </span><span class="token operator" style="color:#ff79c6">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#bd93f9">cd</span><span class="token plain"> questitto/</span></div></div></div></div></div><p>Your Directory structure should look like:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">├── docker-compose.yml</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">├── LICENSE</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">├── mosquitto</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">│   ├── config</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">│   │   ├── mosquitto.conf</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">│   │   └── </span><span class="token function" style="color:#8be9fd">passwd</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">│   └── data</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">├── questitto.env</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">├── README.md</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">└── telegraf</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    └── telegraf.conf</span></div></div></div></div></div><p>Some brief information on the files:</p><ul><li><code>mosquitto/config/passwd</code>: file that has the usernames and passwords necessary
for publishing/subscribing to the MQTT broker</li><li><code>questitto.env</code>: environment variable file used by <code>telegraf</code> container to
subscribe to the MQTT Broker for data ingestion</li><li><code>telegraf/telegraf.conf</code>: TOML Configuration file for letting <code>telegraf</code> do
the heavy lifting and inserting the data into QuestDB</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="user-management-for-mosquitto-mqtt-broker"></a>User Management for Mosquitto MQTT Broker<a aria-hidden="true" tabindex="-1" class="hash-link" href="#user-management-for-mosquitto-mqtt-broker" title="Direct link to heading">#</a></h3><p>In the repository there are two users added by default (see
<code>mosquitto/config/passwd</code> file):</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-questdb-sql codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">pubclient:questitto</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">subclient:questitto</span></div></div></div></div></div><p>You can use the <code>pubclient</code> credential on your IoT Devices / MQTT Client to
publish information to the Broker. Similarly, <code>subclient</code> credential will be
used by <code>telegraf</code> or any other user of the stack in order to subscribe to the
incoming data. Feel free to change the passwords for the usernames or add more
credentials according to your needs. The format for the credential entries is as
follows (in plain text):</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-questdb-sql codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">username1:password1</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">username2:password2</span></div></div></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Mosquitto Broker requires the the credentials to be encrypted and hence you
bring the stack up with encrypting the passwords, the broker container will fail
to start</p></div></div><p>Let&#x27;s encrypt the passwords using the following command:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4"># assuming your current directory is questitto</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">docker run -it --rm -v </span><span class="token variable" style="color:#ff79c6">$(</span><span class="token variable builtin class-name" style="color:#bd93f9">pwd</span><span class="token variable" style="color:#ff79c6">)</span><span class="token plain">/mosquitto/config:/mosquitto/config eclipse-mosquitto mosquitto_passwd -U /mosquitto/config/passwd</span></div></div></div></div></div><p>The command does not return anything hence, after executing the command check
the <code>mosquitto/config/passwd</code> file using:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#8be9fd">cat</span><span class="token plain"> mosquitto/config/passwd</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="input-data-format--mqtt-topic-design"></a>Input Data Format + MQTT Topic Design<a aria-hidden="true" tabindex="-1" class="hash-link" href="#input-data-format--mqtt-topic-design" title="Direct link to heading">#</a></h3><blockquote><p>For IoT Applications, let the higher components in the stack do the
heavy-lifting i.e. <code>telegraf</code> and <code>mosquitto</code> and keep the payload and topics
very simple</p></blockquote><p>As an example the MQTT Topics are selected as follows:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-questdb-sql codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">IOT/&lt;SensorID&gt;/&lt;measurement_name&gt;</span></div></div></div></div></div><p>if your IoT sensor publishes temperature data then you can publish it to a
topic:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-questdb-sql codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">IOT/sensor1/temp</span></div></div></div></div></div><p>with the payload in <strong>InfluxDB line protocol string</strong>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-questdb-sql codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">environment,type=BME280 temp=23.9</span></div></div></div></div></div><p>We then let <code>telegraf</code> translate the location of <code>sensor1</code> for us using the
<code>processors</code> plugin and the MQTT topic itself.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="telegraf-configuration"></a>Telegraf Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#telegraf-configuration" title="Direct link to heading">#</a></h3><p><code>telegraf</code> subscribes to the MQTT Broker using the <code>subclient</code> credential
mentioned above.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If you change the user credentials, make sure to encrypt the password and change
the <code>questitto.env</code> file with the actual credentials for <code>telegraf</code></p></div></div><p>Let&#x27;s look at how <code>telegraf</code> can add our sensor&#x27;s location for us.</p><p>We use the <code>inputs.mqtt_consumer</code> plugin to connect to our broker and subscribe
to it via the credentials in the <code>.env</code> file:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">[[inputs.mqtt_consumer]]</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    servers = [ &quot;tcp://mosquitto:1883&quot; ]</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    # Topics to subscribe to:</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    topics = [</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        &quot;IOT/+/acc&quot;,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        &quot;IOT/+/mag&quot;,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        &quot;IOT/+/gyro&quot;,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        &quot;IOT/+/temp&quot;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    ]</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    # Telegraf will also store the topic as a tag with name `topic`</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    # NOTE: necessary for the Processor REGEX to extract &lt;Sensor_ID&gt;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    topic_tag = &quot;topic&quot;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    username = &quot;${TG_MOSQUITTO_USERNAME}&quot;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    password = &quot;${TG_MOSQUITTO_PASSWORD}&quot;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    # Connection timeout</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    connection_timeout = &quot;30s&quot;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    # Incoming MQTT Payload from Sensor nodes is in InfluxDB line protocol strings</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    data_format = &quot;influx&quot;</span></div></div></div></div></div><p>we store the MQTT topic as a <code>tag</code> called <code>topic</code> and now leverage it for some
Regular Expression and Enumeration Magic as follows:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">[[processors.regex]]</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    order = 1</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    [[processors.regex.tags]]</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        # use the `topic` tag to extract information from the MQTT Topic</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        key = &quot;topic&quot;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        # Topic: IOT/&lt;SENSOR_ID&gt;/&lt;measurement&gt;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        # Extract &lt;SENSOR_ID&gt;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        pattern = &quot;.*/(.*)/.*&quot;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        # Replace the first occurrence</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        replacement = &quot;${1}&quot;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        # Store it in tag called:</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        result_key = &quot;sensorID&quot;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">[[processors.enum]]</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    order = 2</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    [[processors.enum.mapping]]</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        # create a mapping between extracted sensorID and some meta-data</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        tag = &quot;sensorID&quot;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        dest = &quot;location&quot;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        [processors.enum.mapping.value_mappings]</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">            &quot;sensor1&quot; = &quot;kitchen&quot;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">            &quot;sensor2&quot; = &quot;livingroom&quot;</span></div></div></div></div></div><p>Based on our MQTT Topic design we know that the <code>SensorID</code> will be on the second
level i.e. <code>IOT/(.*)/#</code>.</p><p>We perform the Regular Expression to extract the sensor&#x27;s ID and use <code>enum</code> to
map it to its dedicated location:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-questdb-sql codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">sensor1 --&gt; kitchen</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">sensor2 --&gt; livingroom</span></div></div></div></div></div><p>The location will be stored as a <code>tag</code> called <code>location</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="data-insertion-to-questdb"></a>Data Insertion to QuestDB<a aria-hidden="true" tabindex="-1" class="hash-link" href="#data-insertion-to-questdb" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">[[outputs.socket_writer]]</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    address = &quot;tcp://questdb:9009&quot;</span></div></div></div></div></div><p>will send the line protocol String to port 9009 of the <code>questdb</code> container and
you don&#x27;t even need to define a schema beforehand!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="visualize-it"></a>Visualize It!<a aria-hidden="true" tabindex="-1" class="hash-link" href="#visualize-it" title="Direct link to heading">#</a></h3><p>QuestDB comes with its own cool UI available on <code>http://&lt;IP_address&gt;:9000</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="example"></a>Example<a aria-hidden="true" tabindex="-1" class="hash-link" href="#example" title="Direct link to heading">#</a></h2><p>Get the Stack up:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">docker-compose up -d</span></div></div></div></div></div><p>As a simple Example I used <a href="https://mqttfx.org" target="_blank" rel="noopener noreferrer">MQTT.fx</a> as a client to publish information in
line Protocol to the following Topic:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-json codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property">&quot;topic&quot;</span><span class="token operator" style="color:#ff79c6">:</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&quot;IOT/sensor1/acc&quot;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token property">&quot;payload&quot;</span><span class="token operator" style="color:#ff79c6">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string" style="color:#f1fa8c">&quot;accleration,type=BNO055 x=2.3,y=3.2,z=0.01&quot;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string" style="color:#f1fa8c">&quot;accleration,type=BNO055 x=2.3,y=3.2,z=0.01&quot;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string" style="color:#f1fa8c">&quot;accleration,type=BNO055 x=2.3,y=3.2,z=0.02&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span></div></div></div></div></div><p>with the <code>pubclient:questitto</code> credentials and on the QuestDB UI you can see:</p><p><img alt="Automatic table creation based on InfluxDB line protocol measurement name" src="data:image/png;base64,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D3JXXzE+lconyPQcuTLv5SZlP5QXHOKumHyzvnButd7ycz+gmw9y4+suVZxVvsB2LvIGIqtK92XmeGuO7Oa9lKkiir3Ha1+mVXPo9/4GeUfdS7VqnArZerbO92r+fU9mhmJfC365ATpT5wd5eXds2F9xM4la0VzeHS/2fxgjE1M1w3xPQV7enb+xxsiN2te63kuQG153hZp/FKE1QS4dcRg90sKjvLmbfZQO596IkVo3BqnavpmYnrgcJ/srRz8SCvLytXMjHrnsVNVnk8vNlk2YAx4tD0WQecCKR6ium21Kz5H8TUEmP91b9QvGi1s/LBz1uzEIPKo6/l7WPEgvxYZdZwvhmInMkXu51OnRU7zmfHLkcNk8hlXrt8XAqauFW6lejcF7mrEOdKqaQV65pmfuvtSttH88GyvX9LR9o2lW9R2sym9PWaqxW3jeXc9AAtv3YMxNXJvnPPJE5X3MgUdGzSB3Le+OFd1r4vlXt7fUiu41bd9gFuNukOue050jyPW9FDsGhyMzWTGPITsTk2MXa5z/Bh4ldYMMADw4ggwACRBkAEiAIANAAgQZABIgyACQAEEGgAQIMgAkQJABIAGCDAAJEGQASIAgA0ACBBkAEiDIAJAAQQaABAgyACRAkAEgAYIMAAkQZABIgCADQAIEGQASIMgAkABBBoAECDIAJECQASABggwACRBkAEiAIANAAgQZABIgyACQAEEGgAQIMgAkQJABIAGCDAAJEGQASIAgA0ACBBkAEiDIAJAAQQaABAgyACRAkAEgAYIMAAkQZABIgCADQAIEGQASIMgAkABBBoAECDIAJECQASABggwACRBkAEiAIANAAgQZABIgyACQAEEGgAQIMgAkQJABIAGCDAAJEGQASIAgA0ACBBkAEiDIAJAAQQaABAgyACRAkAEgAYIMAAkQZABIgCADQAIEGQASIMgAkABBBoAECDIAJECQASABggwACRBkAEiAIANAAgQZABIgyACQAEEGgAQIMgAkQJABIAGCDAAJEGQASIAgA0ACBBkAEiDIAJAAQQaABAgyACRAkAEgAYIMAAkQZABIgCADQAIEGQASIMgAkABBBoAECDIAJECQASABggwACRBkAEiAIANAAgQZABIgyACQAEEGgAQIMgAkQJABIAGCDAAJEGQASIAgA0ACBBkAEiDIAJAAQQaABAgyACRAkAEgAYIMAAkQZABIgCADQAIEGQASIMgAkABBBoAECDIAJECQASABggwACRBkAEiAIANAAgQZABIgyACQAEEGgAQIMgAkQJABIAGCDAAJEGQASIAgA0ACBBkAEiDIAJAAQQaABAgyACRAkAEgAYIMAAkQZABIgCADQAIEGQASIMgAkABBBnJAF4EAAALsSURBVIAECDIAJECQASABggwACRBkAEiAIANAAgQZABIgyACQAEEGgAQIMgAkQJABIAGCDAAJEGQASIAgA0ACBBkAEiDIAJAAQQaABAgyACRAkAEgAYIMAAkQZABIgCADQAIEGQASIMgAkABBBoAECDIAJECQASABggwACRBkAEiAIANAAgQZABIgyACQAEEGgAQIMgAkQJABIAGCDAAJEGQASIAgA0ACBBkAEiDIAJAAQQaABAgyACRAkAEgAYIMAAkQZABIgCADQAIEGQASIMgAkABBBoAECDIAJECQASABggwACRBkAEiAIANAAgQZABIgyACQAEEGgAQIMgAkQJABIAGCDAAJEGQASIAgA0ACBBkAEiDIAJAAQQaABAgyACRAkAEgAYIMAAkQZABIgCADQAIEGQASIMgAkABBBoAECDIAJECQASABggwACRBkAEiAIANAAgQZABIgyACQAEEGgAQIMgAkQJABIAGCDAAJEGQASIAgA0ACBBkAEiDIAJAAQQaABAgyACRAkAEgAYIMAAkQZABIgCADQAIEGQASIMgAkABBBoAECDIAJECQASABggwACRBkAEiAIANAAgQZABIgyACQAEEGgAQIMgAkQJABIAGCDAAJEGQASIAgA0ACBBkAEiDIAJAAQQaABAgyACRAkAEgAYIMAAkQZABIgCADQAIEGQASIMgAkABBBoAECDIAJECQASABggwACRBkAEiAIANAAgQZABIgyACQAEEGgAQIMgAkQJABIAGCDAAJEGQASIAgA0ACBBkAEiDIAJAAQQaABAgyACRAkAEgAYIMAAkQZABIgCADQAIEGQASIMgAkABBBoAECDIAJECQASABggwACRBkAEiAIANAAgQZABIgyACQAEEGgAQIMgAkQJABIAGCDAAJEGQASIAgA0ACBBkAEiDIAJAAQQaABAgyACRAkAEgAYIMAAkQZABIgCADQAIEGQASIMgAkABBBoAECDIAJOD/A8GQ4yonnW6KAAAAAElFTkSuQmCC"></p><p>With the <code>location</code> and other <code>tags</code> from the line protocol inserted:</p><p><img alt="Columns created by QuestDB for acceleration Table" src="/assets/images/schema-e7e1daa3dce2ec1867b68c33fe9d3ec8.png"></p><p>A simple query where I would like to know the acceleration value in the
<code>kitchen</code> for the <strong>X-axis</strong> is as simple as:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-questdb-sql codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">SELECT timestamp, x FROM acceleration</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">WHERE location = &#x27;kitchen&#x27;;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="nuggets"></a>Nuggets<a aria-hidden="true" tabindex="-1" class="hash-link" href="#nuggets" title="Direct link to heading">#</a></h2><p>If you need to add/remove or adapt the Users or the <code>telegraf.conf</code> without
bringing down the stack or the services within <code>questitto</code> simply use the
<code>SIGHUP</code> signal for the containers.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-bash codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">docker </span><span class="token function" style="color:#8be9fd">kill</span><span class="token plain"> --signal</span><span class="token operator" style="color:#ff79c6">=</span><span class="token plain">SIGHUP mosquitto</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#6272a4"># OR</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">docker </span><span class="token function" style="color:#8be9fd">kill</span><span class="token plain"> --signal</span><span class="token operator" style="color:#ff79c6">=</span><span class="token plain">SIGHUP telegraf</span></div></div></div></div></div><p>See <a href="https://shantanoo-desai.github.io/posts/technology/nugget_mqtt_iot/" target="_blank" rel="noopener noreferrer">my blog post</a> for a detailed write up.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="repository"></a>Repository<a aria-hidden="true" tabindex="-1" class="hash-link" href="#repository" title="Direct link to heading">#</a></h2><p>You can find the <a href="https://github.com/shantanoo-desai/questitto" target="_blank" rel="noopener noreferrer">repository on GitHub</a>. Please feel free to open Issues/PRs
and <a href="https://slack.https://fsharechat.github.io/" target="_blank" rel="noopener noreferrer">join</a> the Slack Community, the developers are really helpful
there!</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/iot">iot</a><a class="margin-horiz--sm" href="/blog/tags/docker">docker</a><a class="margin-horiz--sm" href="/blog/tags/community-written">community-written</a></div></footer></article><div></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2020/09/24/why-performance-matters"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">« Why performance matters in time-series data</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2020/08/19/memory-mapping-deep-dive"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Re-examining our approach to memory mapping »</div></a></div></nav></div></div><div class="col col--2"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#motivation" class="table-of-contents__link">Motivation</a></li><li><a href="#stack" class="table-of-contents__link">Stack</a><ul><li><a href="#setup" class="table-of-contents__link">Setup</a></li><li><a href="#user-management-for-mosquitto-mqtt-broker" class="table-of-contents__link">User Management for Mosquitto MQTT Broker</a></li><li><a href="#input-data-format--mqtt-topic-design" class="table-of-contents__link">Input Data Format + MQTT Topic Design</a></li><li><a href="#telegraf-configuration" class="table-of-contents__link">Telegraf Configuration</a></li><li><a href="#data-insertion-to-questdb" class="table-of-contents__link">Data Insertion to QuestDB</a></li><li><a href="#visualize-it" class="table-of-contents__link">Visualize It!</a></li></ul></li><li><a href="#example" class="table-of-contents__link">Example</a></li><li><a href="#nuggets" class="table-of-contents__link">Nuggets</a></li><li><a href="#repository" class="table-of-contents__link">Repository</a></li></ul></div></div></div></div></div><footer class="footer_mib0 section_3Kiu"><div class="footer__inner_z0Le section--inner_2xOo"><div class="footer__column_3Npq footer__column--left_1EuR"><img alt="QuestDB logo" class="footer__logo_29Wo" src="/img/footer/questdb.svg" title="QuestDB - Fastest open source database for time series and analytics"><p class="footer__tagline_2F15">QuestDB is the fastest open source time series database</p><a class="footer__github_8UHO button_Ni2_ button--icon_3YKU button--secondary_1x2U button--xsmall_3jz_" href="https://github.com/questdb/questdb" rel="noopener noreferrer" target="_blank"><img alt="GitHub logo" height="22" src="/img/github.svg" title="GitHub" width="22">Star us on GitHub</a></div><div class="footer__column_3Npq footer__column--right_1XPX"><div class="footer__links_3WB8"><ul class="footer__items_3gGI"><li class="footer__title_1y7h">QuestDB</li><li class="footer__item_1JzF"><a class="footer__link_2PDg" href="/docs/introduction/">Documentation</a></li><li class="footer__item_1JzF"><a class="footer__link_2PDg" href="https://github.com/questdb/questdb/projects/3" rel="noopener noreferrer" target="_blank">Roadmap</a></li><li class="footer__item_1JzF"><a class="footer__link_2PDg" href="/careers/">Careers</a></li></ul></div><div class="footer__links_3WB8"><ul class="footer__items_3gGI"><li class="footer__title_1y7h">Community</li><li class="footer__item_1JzF"><a class="footer__link_2PDg" href="https://slack.https://fsharechat.github.io/" rel="noopener noreferrer" target="_blank">Slack</a></li><li class="footer__item_1JzF"><a class="footer__link_2PDg" href="https://twitter.com/questdb" rel="noopener noreferrer" target="_blank">Twitter</a></li></ul></div><div class="footer__links_3WB8"><ul class="footer__items_3gGI"><li class="footer__title_1y7h">More</li><li class="footer__item_1JzF"><a class="footer__link_2PDg" href="/blog/">Blog</a></li><li class="footer__item_1JzF"><a class="footer__link_2PDg" href="https://github.com/questdb/questdb" rel="noopener noreferrer" target="_blank">GitHub</a></li></ul></div></div></div><div class="footer__bottom_2RpL"><p class="footer__copyright_1o2i">Copyright © 2020 QuestDB</p></div></footer></div>
<script src="/styles.c1a63971.js" defer="defer"></script>
<script src="/main.6f3bf291.js" defer="defer"></script>
<script src="/common.3d2125a2.js" defer="defer"></script>
<script src="/ccc49370.e8c9b56c.js" defer="defer"></script>
<script src="/a3b8561b.08135e97.js" defer="defer"></script>
</body>
</html>