(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{161:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return n})),a.d(t,"metadata",(function(){return c})),a.d(t,"rightToc",(function(){return b})),a.d(t,"default",(function(){return m}));var i=a(2),I=a(6),g=(a(0),a(218)),n={title:"Timestamp function",sidebar_label:"Timestamp",description:"Timestamp function reference documentation."},c={unversionedId:"reference/function/timestamp",id:"reference/function/timestamp",isDocsHomePage:!1,title:"Timestamp function",description:"Timestamp function reference documentation.",source:"@site/docs/reference/function/timestamp.md",slug:"/reference/function/timestamp",permalink:"/docs/reference/function/timestamp",version:"current",sidebar_label:"Timestamp",sidebar:"docs",previous:{title:"Timestamp generator",permalink:"/docs/reference/function/timestamp-generator"},next:{title:"SQL execution order",permalink:"/docs/concept/sql-execution-order"}},b=[{value:"Syntax",id:"syntax",children:[{value:"During a CREATE operation",id:"during-a-create-operation",children:[]},{value:"During a SELECT operation",id:"during-a-select-operation",children:[]}]},{value:"Examples",id:"examples",children:[{value:"During a CREATE operation",id:"during-a-create-operation-1",children:[]},{value:"During a SELECT operation",id:"during-a-select-operation-1",children:[]}]}],d={rightToc:b};function m(e){var t=e.components,n=Object(I.a)(e,["components"]);return Object(g.b)("wrapper",Object(i.a)({},d,n,{components:t,mdxType:"MDXLayout"}),Object(g.b)("p",null,Object(g.b)("inlineCode",{parentName:"p"},"timestamp(columnName)")," elects a\n",Object(g.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/concept/designated-timestamp/"}),"designated timestamp"),":"),Object(g.b)("ul",null,Object(g.b)("li",{parentName:"ul"},"during a ",Object(g.b)("a",Object(i.a)({parentName:"li"},{href:"/docs/reference/sql/create-table/#timestamp"}),"CREATE TABLE")," operation"),Object(g.b)("li",{parentName:"ul"},"during a ",Object(g.b)("a",Object(i.a)({parentName:"li"},{href:"/docs/reference/sql/select/"}),"SELECT")," operation (",Object(g.b)("inlineCode",{parentName:"li"},"dynamic timestamp"),")")),Object(g.b)("h2",{id:"syntax"},"Syntax"),Object(g.b)("h3",{id:"during-a-create-operation"},"During a CREATE operation"),Object(g.b)("p",null,Object(g.b)("img",{alt:"Flow chart showing the syntax of the TIMESTAMP keyword",src:a(336).default})),Object(g.b)("p",null,"Create a ",Object(g.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/concept/designated-timestamp/"}),"designated timestamp")," column\nduring table creation. For more information, refer to the\n",Object(g.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/reference/sql/create-table/"}),"CREATE TABLE")," section."),Object(g.b)("h3",{id:"during-a-select-operation"},"During a SELECT operation"),Object(g.b)("p",null,Object(g.b)("img",{alt:"Flow chart showing the syntax of the timestamp function",src:a(270).default})),Object(g.b)("p",null,"Creates a ",Object(g.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/concept/designated-timestamp/"}),"designated timestamp")," column in\nthe result of a query."),Object(g.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(g.b)("div",Object(i.a)({parentName:"div"},{className:"admonition-heading"}),Object(g.b)("h5",{parentName:"div"},Object(g.b)("span",Object(i.a)({parentName:"h5"},{className:"admonition-icon"}),Object(g.b)("svg",Object(i.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(g.b)("path",Object(i.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(g.b)("div",Object(i.a)({parentName:"div"},{className:"admonition-content"}),Object(g.b)("p",{parentName:"div"},"The output query must be ordered by time. ",Object(g.b)("inlineCode",{parentName:"p"},"TIMESTAMP()")," does not check for order\nand using timestamp functions on unordered data may produce unexpected results."))),Object(g.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(g.b)("div",Object(i.a)({parentName:"div"},{className:"admonition-heading"}),Object(g.b)("h5",{parentName:"div"},Object(g.b)("span",Object(i.a)({parentName:"h5"},{className:"admonition-icon"}),Object(g.b)("svg",Object(i.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(g.b)("path",Object(i.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(g.b)("div",Object(i.a)({parentName:"div"},{className:"admonition-content"}),Object(g.b)("p",{parentName:"div"},"Dynamic timestamp allows to perform time series operations such as ",Object(g.b)("inlineCode",{parentName:"p"},"LATEST BY"),",\n",Object(g.b)("inlineCode",{parentName:"p"},"SAMPLE BY")," or ",Object(g.b)("inlineCode",{parentName:"p"},"LATEST BY")," on tables which do not have a ",Object(g.b)("inlineCode",{parentName:"p"},"designated timestamp"),"."))),Object(g.b)("h2",{id:"examples"},"Examples"),Object(g.b)("h3",{id:"during-a-create-operation-1"},"During a CREATE operation"),Object(g.b)("p",null,"The following creates a table with\n",Object(g.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/concept/designated-timestamp/"}),"designated timestamp"),"."),Object(g.b)("pre",null,Object(g.b)("code",Object(i.a)({parentName:"pre"},{className:"language-questdb-sql",metastring:'title="Create table"',title:'"Create','table"':!0}),"CREATE TABLE\ntemperatures(ts timestamp, sensorID symbol, sensorLocation symbol, reading double)\ntimestamp(ts);\n")),Object(g.b)("h3",{id:"during-a-select-operation-1"},"During a SELECT operation"),Object(g.b)("p",null,"The following will query a table and assign a\n",Object(g.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/concept/designated-timestamp/"}),"designated timestamp")," to the output. Note\nthe use of brackets to ensure the timestamp clause is applied to the result of\nthe query instead of the whole ",Object(g.b)("inlineCode",{parentName:"p"},"readings")," table."),Object(g.b)("pre",null,Object(g.b)("code",Object(i.a)({parentName:"pre"},{className:"language-questdb-sql",metastring:'title="Dynamic timestamp"',title:'"Dynamic','timestamp"':!0}),"(SELECT cast(dateTime AS TIMESTAMP) ts, device, value FROM readings) timestamp(ts);\n")),Object(g.b)("p",null,"Although the ",Object(g.b)("inlineCode",{parentName:"p"},"readings")," table does not have a designated timestamp, we are able\nto create one on the fly. Now, we can use this into a subquery to perform\ntimestamp operations."),Object(g.b)("pre",null,Object(g.b)("code",Object(i.a)({parentName:"pre"},{className:"language-questdb-sql",metastring:'title="Dynamic timestamp subquery"',title:'"Dynamic',timestamp:!0,'subquery"':!0}),"SELECT ts, avg(value) FROM\n(SELECT cast(dateTime AS TIMESTAMP) ts, value FROM readings) timestamp(ts)\nSAMPLE BY 1d;\n")),Object(g.b)("p",null,"If the data is unordered, it is important to order it first."),Object(g.b)("pre",null,Object(g.b)("code",Object(i.a)({parentName:"pre"},{className:"language-questdb-sql",metastring:'title="Dynamic timestamp - unordered data"',title:'"Dynamic',timestamp:!0,"-":!0,unordered:!0,'data"':!0}),"SELECT ts, avg(value) FROM\n(SELECT ts, value FROM unordered_readings ORDER BY ts) timestamp(ts)\nSAMPLE BY 1d;\n")))}m.isMDXComponent=!0},336:function(e,t,a){"use strict";a.r(t),t.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NzUiIGhlaWdodD0iMzciPgogICAgPGRlZnM+CiAgICAgICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KICAgICAgICAgICAgQG5hbWVzcGFjZSAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciOwogICAgICAgICAgICAgICAgLmxpbmUgICAgICAgICAgICAgICAgIHtmaWxsOiBub25lOyBzdHJva2U6ICM2MzYyNzM7fQogICAgICAgICAgICAgICAgLmJvbGQtbGluZSAgICAgICAgICAgIHtzdHJva2U6ICM2MzYyNzM7IHNoYXBlLXJlbmRlcmluZzogY3Jpc3BFZGdlczsgc3Ryb2tlLXdpZHRoOiAyOyB9CiAgICAgICAgICAgICAgICAudGhpbi1saW5lICAgICAgICAgICAge3N0cm9rZTogIzYzNjI3Mzsgc2hhcGUtcmVuZGVyaW5nOiBjcmlzcEVkZ2VzfQogICAgICAgICAgICAgICAgLmZpbGxlZCAgICAgICAgICAgICAgIHtmaWxsOiAjNjM2MjczOyBzdHJva2U6IG5vbmU7fQogICAgICAgICAgICAgICAgdGV4dC50ZXJtaW5hbCAgICAgICAgIHtmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAiU2Vnb2UgVUkiLCBSb2JvdG8sIFVidW50dSwgQ2FudGFyZWxsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICAgICAgICAgICBmaWxsOiAjZmZmZmZmOwogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0ZXh0Lm5vbnRlcm1pbmFsICAgICAge2ZvbnQtZmFtaWx5OiAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsICJTZWdvZSBVSSIsIFJvYm90bywgVWJ1bnR1LCBDYW50YXJlbGwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICAgICAgICAgIGZpbGw6ICNlMjg5YTQ7CiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogbm9ybWFsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGV4dC5yZWdleHAgICAgICAgICAgIHtmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAiU2Vnb2UgVUkiLCBSb2JvdG8sIFVidW50dSwgQ2FudGFyZWxsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICAgICAgICAgICBmaWxsOiAjMDAxNDFGOwogICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJlY3QsIGNpcmNsZSwgcG9seWdvbiB7ZmlsbDogbm9uZTsgc3Ryb2tlOiBub25lO30KICAgICAgICAgICAgICAgIHJlY3QudGVybWluYWwgICAgICAgICB7ZmlsbDogbm9uZTsgc3Ryb2tlOiAjYmUyZjViO30KICAgICAgICAgICAgICAgIHJlY3Qubm9udGVybWluYWwgICAgICB7ZmlsbDogcmdiYSgyNTUsMjU1LDI1NSwwLjEpOyBzdHJva2U6IG5vbmU7fQogICAgICAgICAgICAgICAgcmVjdC50ZXh0ICAgICAgICAgICAgIHtmaWxsOiBub25lOyBzdHJva2U6IG5vbmU7fQogICAgICAgICAgICAgICAgcG9seWdvbi5yZWdleHAgICAgICAgIHtmaWxsOiAjQzdFQ0ZGOyBzdHJva2U6ICMwMzhjYmM7fQogICAgICAgIDwvc3R5bGU+CiAgICA8L2RlZnM+CiAgICA8cG9seWdvbiBwb2ludHM9IjkgMTcgMSAxMyAxIDIxIi8+CiAgICA8cG9seWdvbiBwb2ludHM9IjE3IDE3IDkgMTMgOSAyMSIvPgogICAgPHJlY3QgeD0iMzEiIHk9IjMiIHdpZHRoPSI3MiIgaGVpZ2h0PSIzMiIgcng9IjEwIi8+CiAgICA8cmVjdCB4PSIyOSIgeT0iMSIgd2lkdGg9IjcyIiBoZWlnaHQ9IjMyIiBjbGFzcz0idGVybWluYWwiIHJ4PSIxMCIvPgogICAgPHRleHQgY2xhc3M9InRlcm1pbmFsIiB4PSIzOSIgeT0iMjEiPkNSRUFURTwvdGV4dD48YSB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeGxpbms6aHJlZj0iI3NvbWVDcmVhdGVUYWJsZVN0YXRlbWVudCIgeGxpbms6dGl0bGU9InNvbWVDcmVhdGVUYWJsZVN0YXRlbWVudCI+CiAgICA8cmVjdCB4PSIxMjMiIHk9IjMiIHdpZHRoPSIxOTgiIGhlaWdodD0iMzIiLz4KICAgIDxyZWN0IHg9IjEyMSIgeT0iMSIgd2lkdGg9IjE5OCIgaGVpZ2h0PSIzMiIgY2xhc3M9Im5vbnRlcm1pbmFsIi8+CiAgICA8dGV4dCBjbGFzcz0ibm9udGVybWluYWwiIHg9IjEzMSIgeT0iMjEiPnNvbWVDcmVhdGVUYWJsZVN0YXRlbWVudDwvdGV4dD48L2E+PHJlY3QgeD0iMzQxIiB5PSIzIiB3aWR0aD0iOTIiIGhlaWdodD0iMzIiIHJ4PSIxMCIvPgogICAgPHJlY3QgeD0iMzM5IiB5PSIxIiB3aWR0aD0iOTIiIGhlaWdodD0iMzIiIGNsYXNzPSJ0ZXJtaW5hbCIgcng9IjEwIi8+CiAgICA8dGV4dCBjbGFzcz0idGVybWluYWwiIHg9IjM0OSIgeT0iMjEiPnRpbWVzdGFtcDwvdGV4dD4KICAgIDxyZWN0IHg9IjQ1MyIgeT0iMyIgd2lkdGg9IjI2IiBoZWlnaHQ9IjMyIiByeD0iMTAiLz4KICAgIDxyZWN0IHg9IjQ1MSIgeT0iMSIgd2lkdGg9IjI2IiBoZWlnaHQ9IjMyIiBjbGFzcz0idGVybWluYWwiIHJ4PSIxMCIvPgogICAgPHRleHQgY2xhc3M9InRlcm1pbmFsIiB4PSI0NjEiIHk9IjIxIj4oPC90ZXh0PjxhIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bGluazpocmVmPSIjY29sdW1uTmFtZSIgeGxpbms6dGl0bGU9ImNvbHVtbk5hbWUiPgogICAgPHJlY3QgeD0iNDk5IiB5PSIzIiB3aWR0aD0iMTAyIiBoZWlnaHQ9IjMyIi8+CiAgICA8cmVjdCB4PSI0OTciIHk9IjEiIHdpZHRoPSIxMDIiIGhlaWdodD0iMzIiIGNsYXNzPSJub250ZXJtaW5hbCIvPgogICAgPHRleHQgY2xhc3M9Im5vbnRlcm1pbmFsIiB4PSI1MDciIHk9IjIxIj5jb2x1bW5OYW1lPC90ZXh0PjwvYT48cmVjdCB4PSI2MjEiIHk9IjMiIHdpZHRoPSIyNiIgaGVpZ2h0PSIzMiIgcng9IjEwIi8+CiAgICA8cmVjdCB4PSI2MTkiIHk9IjEiIHdpZHRoPSIyNiIgaGVpZ2h0PSIzMiIgY2xhc3M9InRlcm1pbmFsIiByeD0iMTAiLz4KICAgIDx0ZXh0IGNsYXNzPSJ0ZXJtaW5hbCIgeD0iNjI5IiB5PSIyMSI+KTwvdGV4dD4KICAgIDxwYXRoIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJsaW5lIiBkPSJtMTcgMTcgaDIgbTAgMCBoMTAgbTcyIDAgaDEwIG0wIDAgaDEwIG0xOTggMCBoMTAgbTAgMCBoMTAgbTkyIDAgaDEwIG0wIDAgaDEwIG0yNiAwIGgxMCBtMCAwIGgxMCBtMTAyIDAgaDEwIG0wIDAgaDEwIG0yNiAwIGgxMCBtMyAwIGgtMyIvPgogICAgPHBvbHlnb24gcG9pbnRzPSI2NjUgMTcgNjczIDEzIDY3MyAyMSIvPgogICAgPHBvbHlnb24gcG9pbnRzPSI2NjUgMTcgNjU3IDEzIDY1NyAyMSIvPjwvc3ZnPgo="}}]);