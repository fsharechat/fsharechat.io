(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{205:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return r})),a.d(t,"metadata",(function(){return c})),a.d(t,"rightToc",(function(){return i})),a.d(t,"default",(function(){return j}));var n=a(2),b=a(6),l=(a(0),a(218)),r={title:"My first database",sidebar_label:"My first database",description:"A short tutorial that will show you how to interact with time series data."},c={unversionedId:"guide/my-first-database",id:"guide/my-first-database",isDocsHomePage:!1,title:"My first database",description:"A short tutorial that will show you how to interact with time series data.",source:"@site/docs/guide/my-first-database.md",slug:"/guide/my-first-database",permalink:"/docs/guide/my-first-database",version:"current",sidebar_label:"My first database",sidebar:"docs",previous:{title:"How to perform CRUD operations",permalink:"/docs/guide/crud"},next:{title:"Go tutorial",permalink:"/docs/tutorial/go"}},i=[{value:"Creating a table",id:"creating-a-table",children:[]},{value:"Inserting data",id:"inserting-data",children:[]},{value:"Running queries",id:"running-queries",children:[]},{value:"Deleting tables",id:"deleting-tables",children:[]}],O={rightToc:i};function j(e){var t=e.components,a=Object(b.a)(e,["components"]);return Object(l.b)("wrapper",Object(n.a)({},O,a,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"The goal of this tutorial is to explore QuestDB's features to interact with time\nseries data. This assumes you have an instance running. You can find guides to\nsetup QuestDB on the ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/introduction/"}),"introduction page"),"."),Object(l.b)("p",null,"In this tutorial, you will learn how to"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(n.a)({parentName:"li"},{href:"#creating-a-table"}),"Create tables")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(n.a)({parentName:"li"},{href:"#inserting-data"}),"Populate tables with sample data")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(n.a)({parentName:"li"},{href:"#running-queries"}),"Run simple and advanced queries")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(n.a)({parentName:"li"},{href:"#deleting-tables"}),"Delete tables"))),Object(l.b)("p",null,"As an example, we will look at hypothetical temperature readings from a variety\nof sensors."),Object(l.b)("div",{className:"admonition admonition-info alert alert--info"},Object(l.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(l.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(l.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"All commands are run through the ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/guide/web-console/"}),"Web Console"),"\naccessible on http://localhost:9000."),Object(l.b)("p",{parentName:"div"},"You can also run the same SQL using ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/guide/postgres-wire/"}),"Postgres wire"),"\nor the ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/guide/rest/"}),"REST API"),"."))),Object(l.b)("h2",{id:"creating-a-table"},"Creating a table"),Object(l.b)("p",null,"The first step is to create tables. One will contain the metadata of our\nsensors, the other will contain the readings from these sensors."),Object(l.b)("p",null,"Let's start by creating the ",Object(l.b)("inlineCode",{parentName:"p"},"sensors")," table."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-questdb-sql",metastring:'title="Create a table"',title:'"Create',a:!0,'table"':!0}),"CREATE TABLE sensors (ID LONG, make STRING, city STRING);\n")),Object(l.b)("div",{className:"admonition admonition-info alert alert--info"},Object(l.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(l.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(l.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"The ",Object(l.b)("inlineCode",{parentName:"p"},"CREATE TABLE")," command comes with many more functions. For more information,\nplease refer to the ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/reference/sql/create-table/"}),"CREATE TABLE")," command\nreference."))),Object(l.b)("h2",{id:"inserting-data"},"Inserting data"),Object(l.b)("p",null,"Let's populate our ",Object(l.b)("inlineCode",{parentName:"p"},"sensors")," table with procedurally-generated data."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-questdb-sql",metastring:'title="Insert as select"',title:'"Insert',as:!0,'select"':!0}),"INSERT INTO sensors\n    SELECT\n        x ID, --increasing integer\n        rnd_str('Eberle', 'Honeywell', 'Omron', 'United Automation', 'RS Pro') make,\n        rnd_str('New York', 'Miami', 'Boston', 'Chicago', 'San Francisco') city\n    FROM long_sequence(10000) x\n;\n")),Object(l.b)("div",{className:"admonition admonition-info alert alert--info"},Object(l.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(l.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(l.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"For more information on ",Object(l.b)("inlineCode",{parentName:"p"},"INSERT")," and ",Object(l.b)("inlineCode",{parentName:"p"},"INSERT as select"),", please refer to the\n",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/reference/sql/insert/"}),"INSERT reference"),"."),Object(l.b)("p",{parentName:"div"},"For more information on procedurally generated data in the\n",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/reference/function/random-value-generator/"}),"random generator functions"),"\nand in the ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/reference/function/row-generator/"}),"row generator functions"),"."))),Object(l.b)("p",null,"Our ",Object(l.b)("inlineCode",{parentName:"p"},"sensors")," table now contains 10,000 randomly generated sensors of different\nmakes and in various cities. It should look like the below:"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"ID"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"make"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"city"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"1"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"RS Pro"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"New York")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Honeywell"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Chicago")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"3"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"United Automation"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Miami")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"4"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Honeywell"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Chicago")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"..."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"..."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"...")))),Object(l.b)("p",null,"Let's now create some sensor readings. In this case, we will generate the table\nand the data at the same time."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-questdb-sql",metastring:'title="Create table as"',title:'"Create',table:!0,'as"':!0}),"CREATE TABLE readings\nAS(\n    SELECT\n        x ID,\n        timestamp_sequence(to_timestamp('2019-10-17T00:00:00', 'yyyy-MM-ddTHH:mm:ss'), rnd_long(1,10,2) * 100000L) ts,\n        rnd_double(0)*8 + 15 temp,\n        rnd_long(0, 10000, 0) sensorId\n    FROM long_sequence(10000000) x)\nTIMESTAMP(ts)\nPARTITION BY MONTH;\n")),Object(l.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(l.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(l.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(l.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"While creating this table we did the following:"),Object(l.b)("ul",{parentName:"div"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"TIMESTAMP(ts)")," elected ",Object(l.b)("inlineCode",{parentName:"li"},"ts")," as\n",Object(l.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/concept/designated-timestamp/"}),"designated timestamp"),". This will enable\ntime partitioning."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"PARTITION BY MONTH")," created a monthly partition strategy. Our data will be\nsharded in monthly files.")))),Object(l.b)("p",null,"The generated data will look like the below."),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"ID"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"ts"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"temp"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"sensorId"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"1"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-17T00:00:00.000000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"19.37373911"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"9160")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-17T00:00:00.600000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"21.91184617"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"9671")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"3"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-17T00:00:01.400000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"16.58367834"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"8731")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"4"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-17T00:00:01.500000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"16.69308815"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"3447")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"5"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-17T00:00:01.600000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"19.67991569"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"7985")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"..."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"..."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"..."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"...")))),Object(l.b)("h2",{id:"running-queries"},"Running queries"),Object(l.b)("p",null,"Let's first select all records from the ",Object(l.b)("inlineCode",{parentName:"p"},"readings")," table (note the omission of\n",Object(l.b)("inlineCode",{parentName:"p"},"SELECT * FROM"),"):"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-questdb-sql",metastring:'title="Select *"',title:'"Select','*"':!0}),"readings;\n")),Object(l.b)("p",null,"Let's also select the ",Object(l.b)("inlineCode",{parentName:"p"},"count")," of records from ",Object(l.b)("inlineCode",{parentName:"p"},"readings"),":"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-questdb-sql",metastring:'title="Simple aggregation"',title:'"Simple','aggregation"':!0}),"SELECT count() FROM readings;\n")),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"count"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"10,000,000")))),Object(l.b)("p",null,"and the average reading:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-questdb-sql",metastring:'title="Simple aggregation"',title:'"Simple','aggregation"':!0}),"SELECT avg(temp) FROM readings;\n")),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"average"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"18.997")))),Object(l.b)("p",null,"We can now leverage our ",Object(l.b)("inlineCode",{parentName:"p"},"sensors")," table to get more interesting data."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-questdb-sql",metastring:'title="Simple JOIN"',title:'"Simple','JOIN"':!0}),"SELECT *\nFROM readings\nJOIN(\n    SELECT ID sensId, make, city\n    FROM sensors)\nON readings.sensorId = sensId;\n")),Object(l.b)("p",null,"Results should look like the data below:"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"ID"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"ts"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"temp"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"sensorId"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"sensId"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"make"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"city"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"1"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-17T00:00:00.000000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"19.37373911"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"9160"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"9160"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"RS Pro"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Boston")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-17T00:00:00.600000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"21.91184617"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"9671"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"9671"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"United Automation"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"New York")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"3"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-17T00:00:01.400000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"16.58367834"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"8731"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"8731"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Honeywell"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Miami")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"4"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-17T00:00:01.500000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"16.69308815"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"3447"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"3447"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"United Automation"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Miami")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"5"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-17T00:00:01.600000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"19.67991569"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"7985"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"7985"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Eberle"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"San Francisco")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"6"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-17T00:00:01.600000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"15.39514039"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"4230"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"4230"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"United Automation"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Chicago")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"7"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-17T00:00:02.100000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"15.06719566"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2829"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2829"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Honeywell"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"New York")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"..."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"..."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"..."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"..."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"..."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"..."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"...")))),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-questdb-sql",metastring:'title="Aggregation keyed by city"',title:'"Aggregation',keyed:!0,by:!0,'city"':!0}),"SELECT city, max(temp)\nFROM readings\nJOIN(\n    SELECT ID sensId, city\n    FROM sensors)\nON readings.sensorId = sensId;\n")),Object(l.b)("p",null,"Results should look like the data below:"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"city"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"max"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Boston"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"22.99999233")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"New York"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"22.99999631")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Miami"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"22.99999673")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"San Francisco"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"22.99999531")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Chicago"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"22.9999988")))),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-questdb-sql",metastring:'title="Aggregation by hourly time buckets"',title:'"Aggregation',by:!0,hourly:!0,time:!0,'buckets"':!0}),"SELECT ts, city, make, avg(temp)\nFROM readings\nJOIN (\n    SELECT ID sensId, city, make\n    FROM sensors\n    WHERE city='Miami' AND make='Omron')\nON readings.sensorId = sensId\nWHERE ts ='2019-10-21;1d' -- this is an interval between 21-10 and 1day later\nSAMPLE BY 1h;\n")),Object(l.b)("p",null,"Results should look like the data below."),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"ts"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"city"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"make"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"average"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-21T00:00:00.000000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Miami"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Omron"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"18.97225935")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-21T01:00:00.000000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Miami"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Omron"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"19.15940157")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-21T02:00:00.000000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Miami"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Omron"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"18.92696357")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-21T03:00:00.000000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Miami"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Omron"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"19.09917038")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-21T04:00:00.000000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Miami"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Omron"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"19.1161127")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"2019-10-21T05:00:00.000000Z"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Miami"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Omron"),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"18.93939597")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"..."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"..."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"..."),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"...")))),Object(l.b)("div",{className:"admonition admonition-info alert alert--info"},Object(l.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(l.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(l.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"Find more about these commands in the ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/reference/sql/select/"}),"Select")," and\n",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/reference/sql/join/"}),"Join")," sections."))),Object(l.b)("h2",{id:"deleting-tables"},"Deleting tables"),Object(l.b)("p",null,"Upon dropping the table, all data is deleted."))}j.isMDXComponent=!0}}]);